<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Diagnosa Kerusakan Laptop - Fuzzy Logic</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 font-sans text-gray-800">
  <!-- HEADER -->
  <header class="bg-green-600 text-white p-4 shadow-md">
    <h1 class="text-2xl font-bold">Diagnosa Kerusakan Laptop (Logika Fuzzy)</h1>
    <p class="text-sm">Masukkan parameter kondisi laptop untuk analisis otomatis</p>
  </header>

  <!-- FORM -->
  <main class="max-w-5xl mx-auto mt-6 p-6 bg-white shadow rounded-xl">
    <h2 class="text-xl font-semibold mb-4">Masukkan Kondisi Laptop</h2>
    <form id="diagnosaForm" class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <label>
        Suhu CPU/GPU (Â°C)
        <input type="number" id="suhu" class="w-full border p-2 rounded" min="20" max="120" required>
      </label>
      <label>
        Penggunaan CPU (%) 
        <input type="number" id="cpu" class="w-full border p-2 rounded" min="0" max="100" required>
      </label>
      <label>
        Penggunaan RAM (%) 
        <input type="number" id="ram" class="w-full border p-2 rounded" min="0" max="100" required>
      </label>
      <label>
        Sisa Penyimpanan (%) 
        <input type="number" id="storage" class="w-full border p-2 rounded" min="0" max="100" required>
      </label>
      <label>
        Kesehatan Baterai (%) 
        <input type="number" id="baterai" class="w-full border p-2 rounded" min="0" max="100" required>
      </label>
      <label>
        Jumlah Siklus Baterai 
        <input type="number" id="siklus" class="w-full border p-2 rounded" min="0" max="2000" required>
      </label>
      <label>
        Status LED/Adaptor/Kipas (0=tidak nyala, 1=nyala)
        <input type="number" id="hardware" class="w-full border p-2 rounded" min="0" max="1" required>
      </label>
      <label>
        SMART Reallocated Sectors (Storage Health) 
        <input type="number" id="smart" class="w-full border p-2 rounded" min="0" max="1000" required>
      </label>
      <label class="md:col-span-2">
        Catatan Tambahan
        <textarea id="catatan" class="w-full border p-2 rounded"></textarea>
      </label>
      <button type="submit" class="md:col-span-2 bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded">Analisis Sekarang</button>
    </form>
  </main>

  <!-- HASIL -->
  <section id="hasil" class="max-w-5xl mx-auto mt-6 p-6 bg-white shadow rounded-xl hidden">
    <h2 class="text-xl font-semibold mb-4">Hasil Diagnosa</h2>
    <div id="output" class="space-y-2"></div>
    <div id="rekomendasi" class="mt-4 p-4 bg-green-50 border-l-4 border-green-600 text-green-800 rounded"></div>
  </section>

  <footer class="text-center mt-8 p-4 text-sm text-gray-500">
    &copy; 2025 Diagnosa Laptop - Sistem Pakar Fuzzy
  </footer>

  <script>
    // Membership functions sederhana
    function mfLow(x, a, b) {
      if (x <= a) return 1;
      if (x >= b) return 0;
      return (b - x) / (b - a);
    }
    function mfHigh(x, a, b) {
      if (x <= a) return 0;
      if (x >= b) return 1;
      return (x - a) / (b - a);
    }

    // Diagnosa
    document.getElementById("diagnosaForm").addEventListener("submit", function(e){
      e.preventDefault();
      const suhu = parseFloat(document.getElementById("suhu").value);
      const cpu = parseFloat(document.getElementById("cpu").value);
      const ram = parseFloat(document.getElementById("ram").value);
      const storage = parseFloat(document.getElementById("storage").value);
      const baterai = parseFloat(document.getElementById("baterai").value);
      const siklus = parseFloat(document.getElementById("siklus").value);
      const hardware = parseFloat(document.getElementById("hardware").value);
      const smart = parseFloat(document.getElementById("smart").value);

      // Fuzzy inference sederhana
      let thermal = Math.max(mfHigh(suhu, 70, 90), mfHigh(cpu, 80, 100));
      let bateraiRusak = Math.max(mfLow(baterai, 50, 80), mfHigh(siklus, 500, 1000));
      let storageRusak = Math.max(mfLow(storage, 5, 10), mfHigh(smart, 50, 200));
      let ramPenuh = mfHigh(ram, 80, 100);
      let matiTotal = hardware === 0 ? 1 : 0;

      let skor = {
        "Mati Total": matiTotal,
        "Kerusakan Thermal (Cepat Panas)": thermal,
        "Kerusakan Baterai": bateraiRusak,
        "Kerusakan Penyimpanan": storageRusak,
        "Laptop Lemot (CPU/RAM tinggi)": ramPenuh,
      };

      // Tampilkan hasil
      let outputHTML = "";
      for (let [key, val] of Object.entries(skor)) {
        outputHTML += `
          <div>
            <div class="flex justify-between">
              <span>${key}</span>
              <span>${(val*100).toFixed(1)}%</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-3">
              <div class="bg-green-600 h-3 rounded-full" style="width:${val*100}%"></div>
            </div>
          </div>`;
      }

      document.getElementById("output").innerHTML = outputHTML;
      document.getElementById("hasil").classList.remove("hidden");

      // Rekomendasi
      let rekom = "";
      if (matiTotal > 0.7) rekom += "Laptop kemungkinan mati total. Cek adaptor, baterai, dan motherboard.<br>";
      if (thermal > 0.5) rekom += "Laptop mengalami masalah panas berlebih. Bersihkan kipas/heatsink, ganti thermal paste.<br>";
      if (bateraiRusak > 0.5) rekom += "Baterai sudah melemah. Pertimbangkan penggantian baterai.<br>";
      if (storageRusak > 0.5) rekom += "Penyimpanan berpotensi rusak. Segera backup data.<br>";
      if (ramPenuh > 0.5) rekom += "Laptop lemot akibat RAM penuh. Tutup aplikasi atau upgrade RAM.<br>";

      if (rekom === "") rekom = "Laptop dalam kondisi relatif normal.";
      document.getElementById("rekomendasi").innerHTML = rekom;
    });
  </script>
</body>
</html>
