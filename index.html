<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Diagnosa Kerusakan Laptop - Fuzzy Logic</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 font-sans text-gray-800">
  <!-- HEADER -->
  <header class="bg-green-600 text-white p-4 shadow-md">
    <h1 class="text-2xl font-bold">Diagnosa Kerusakan Laptop (Logika Fuzzy)</h1>
    <p class="text-sm">Masukkan parameter kondisi laptop untuk analisis otomatis</p>
  </header>

  <!-- FORM -->
  <main class="max-w-6xl mx-auto mt-6 p-6 bg-white shadow rounded-xl">
    <h2 class="text-xl font-semibold mb-4">Masukkan Kondisi Laptop</h2>
    <form id="diagnosaForm" class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <label>
        Nama Laptop
        <input type="text" id="nama" class="w-full border p-2 rounded" required>
      </label>
      <label>
        Model/Seri
        <input type="text" id="model" class="w-full border p-2 rounded" required>
      </label>
      <label>
        Suhu CPU/GPU (°C)
        <input type="number" id="suhu" class="w-full border p-2 rounded" min="20" max="120" required>
      </label>
      <label>
        Penggunaan CPU (%) 
        <input type="number" id="cpu" class="w-full border p-2 rounded" min="0" max="100" required>
      </label>
      <label>
        Penggunaan RAM (%) 
        <input type="number" id="ram" class="w-full border p-2 rounded" min="0" max="100" required>
      </label>
      <label>
        Sisa Penyimpanan (%) 
        <input type="number" id="storage" class="w-full border p-2 rounded" min="0" max="100" required>
      </label>
      <label>
        Kesehatan Baterai (%) 
        <input type="number" id="baterai" class="w-full border p-2 rounded" min="0" max="100" required>
      </label>
      <label>
        Jumlah Siklus Baterai 
        <input type="number" id="siklus" class="w-full border p-2 rounded" min="0" max="2000" required>
      </label>
      <label>
        Status LED/Adaptor/Kipas (0=tidak nyala, 1=nyala)
        <input type="number" id="hardware" class="w-full border p-2 rounded" min="0" max="1" required>
      </label>
      <label>
        SMART Reallocated Sectors (Storage Health) 
        <input type="number" id="smart" class="w-full border p-2 rounded" min="0" max="1000" required>
      </label>
      <label>
        Error GPU/VGA (0=normal, 1=artefak/driver crash)
        <input type="number" id="gpu" class="w-full border p-2 rounded" min="0" max="1" required>
      </label>
      <label>
        Error Layar (0=normal, 1=blank/garis)
        <input type="number" id="layar" class="w-full border p-2 rounded" min="0" max="1" required>
      </label>
      <label>
        Error Keyboard/Touchpad (0=normal, 1=error)
        <input type="number" id="inputdev" class="w-full border p-2 rounded" min="0" max="1" required>
      </label>
      <label class="md:col-span-2">
        Catatan Tambahan
        <textarea id="catatan" class="w-full border p-2 rounded"></textarea>
      </label>
      <button type="submit" class="md:col-span-2 bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded">Analisis Sekarang</button>
    </form>
  </main>

  <!-- HASIL -->
  <section id="hasil" class="max-w-6xl mx-auto mt-6 p-6 bg-white shadow rounded-xl hidden">
    <h2 class="text-xl font-semibold mb-4">Hasil Diagnosa</h2>
    <p id="laptopInfo" class="mb-4 text-gray-700"></p>
    <div id="output" class="space-y-3"></div>
    <div id="rekomendasi" class="mt-6 p-4 bg-green-50 border-l-4 border-green-600 text-green-800 rounded"></div>
  </section>

  <footer class="text-center mt-8 p-4 text-sm text-gray-500">
    &copy; 2025 Diagnosa Laptop - Sistem Pakar Fuzzy
  </footer>

  <script>
    // Membership functions sederhana
    function mfLow(x, a, b) {
      if (x <= a) return 1;
      if (x >= b) return 0;
      return (b - x) / (b - a);
    }
    function mfHigh(x, a, b) {
      if (x <= a) return 0;
      if (x >= b) return 1;
      return (x - a) / (b - a);
    }

    // Diagnosa
    document.getElementById("diagnosaForm").addEventListener("submit", function(e){
      e.preventDefault();
      const nama = document.getElementById("nama").value;
      const model = document.getElementById("model").value;
      const suhu = parseFloat(document.getElementById("suhu").value);
      const cpu = parseFloat(document.getElementById("cpu").value);
      const ram = parseFloat(document.getElementById("ram").value);
      const storage = parseFloat(document.getElementById("storage").value);
      const baterai = parseFloat(document.getElementById("baterai").value);
      const siklus = parseFloat(document.getElementById("siklus").value);
      const hardware = parseFloat(document.getElementById("hardware").value);
      const smart = parseFloat(document.getElementById("smart").value);
      const gpu = parseFloat(document.getElementById("gpu").value);
      const layar = parseFloat(document.getElementById("layar").value);
      const inputdev = parseFloat(document.getElementById("inputdev").value);

      // Fuzzy inference lebih lengkap
      let thermal = Math.max(mfHigh(suhu, 70, 90), mfHigh(cpu, 85, 100));
      let bateraiRusak = Math.max(mfLow(baterai, 50, 80), mfHigh(siklus, 500, 1000));
      let storageRusak = Math.max(mfLow(storage, 5, 10), mfHigh(smart, 100, 300));
      let ramPenuh = mfHigh(ram, 80, 100);
      let matiTotal = hardware === 0 ? 1 : 0;
      let gpuRusak = gpu === 1 ? 0.9 : 0;
      let layarRusak = layar === 1 ? 0.9 : 0;
      let inputRusak = inputdev === 1 ? 0.7 : 0;

      // Motherboard problem → mati total + tidak ada respon
      let motherboardRusak = (matiTotal > 0.7 && gpuRusak < 0.5 && layarRusak < 0.5) ? 0.85 : 0;

      let skor = {
        "Mati Total": matiTotal,
        "Kerusakan Thermal (Cepat Panas)": thermal,
        "Kerusakan Baterai": bateraiRusak,
        "Kerusakan Penyimpanan": storageRusak,
        "Laptop Lemot (CPU/RAM tinggi)": ramPenuh,
        "Kerusakan GPU/VGA": gpuRusak,
        "Kerusakan Layar": layarRusak,
        "Kerusakan Keyboard/Touchpad": inputRusak,
        "Kerusakan Motherboard": motherboardRusak
      };

      // Tampilkan hasil
      let outputHTML = "";
      for (let [key, val] of Object.entries(skor)) {
        outputHTML += `
          <div>
            <div class="flex justify-between">
              <span class="font-medium">${key}</span>
              <span>${(val*100).toFixed(1)}%</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-3">
              <div class="bg-green-600 h-3 rounded-full" style="width:${val*100}%"></div>
            </div>
          </div>`;
      }

      document.getElementById("laptopInfo").innerHTML = 
        `<strong>Laptop:</strong> ${nama} - ${model}`;
      document.getElementById("output").innerHTML = outputHTML;
      document.getElementById("hasil").classList.remove("hidden");

      // Rekomendasi
      let rekom = "";
      if (matiTotal > 0.7) rekom += "⚠️ Laptop kemungkinan <b>mati total</b>. Cek adaptor, baterai, dan motherboard.<br>";
      if (thermal > 0.5) rekom += "🔥 Terjadi <b>overheating</b>. Bersihkan kipas/heatsink, ganti thermal paste.<br>";
      if (bateraiRusak > 0.5) rekom += "🔋 <b>Baterai melemah</b>. Pertimbangkan penggantian.<br>";
      if (storageRusak > 0.5) rekom += "💾 <b>Penyimpanan bermasalah</b>. Backup data segera.<br>";
      if (ramPenuh > 0.5) rekom += "🐢 Laptop lemot akibat <b>RAM penuh</b>. Tutup aplikasi atau upgrade RAM.<br>";
      if (gpuRusak > 0.5) rekom += "🎮 <b>GPU/VGA bermasalah</b>. Bisa karena driver crash atau VGA rusak.<br>";
      if (layarRusak > 0.5) rekom += "🖥️ <b>Layar bermasalah</b> (blank/garis). Periksa kabel fleksibel atau panel LCD.<br>";
      if (inputRusak > 0.5) rekom += "⌨️ <b>Keyboard/Touchpad error</b>. Bisa karena kerusakan hardware atau konektor.<br>";
      if (motherboardRusak > 0.5) rekom += "🔧 <b>Motherboard bermasalah</b>. Disarankan dibawa ke teknisi.<br>";

      if (rekom === "") rekom = "✅ Laptop dalam kondisi relatif normal.";
      document.getElementById("rekomendasi").innerHTML = rekom;
    });
  </script>
</body>
</html>
